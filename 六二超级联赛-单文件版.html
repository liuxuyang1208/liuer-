<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#1e3c72">
    <title>å…­äºŒè¶…çº§è”èµ› - èµ›äº‹æŸ¥çœ‹ç³»ç»Ÿ</title>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #333;
        }

        .page {
            display: none;
            min-height: 100vh;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .page.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
            animation: fadeInUp 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ä¸»é¡µé¢æ ·å¼ */
        .header {
            background: white;
            padding: 15px 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .title-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .csl-title-logo {
            display: flex;
            align-items: center;
        }

        .title-logo-circle {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #d40000 0%, #ff0000 50%, #d40000 100%);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            border: 2px solid #ffcc00;
            box-shadow: 0 2px 8px rgba(212, 0, 0, 0.3);
            overflow: hidden;
        }

        .title-logo-text {
            font-size: 11px;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            letter-spacing: 0.5px;
            font-family: 'Arial', sans-serif;
            z-index: 2;
            position: relative;
        }

        .title-logo-star {
            position: absolute;
            top: 3px;
            right: 3px;
            color: #ffcc00;
            font-size: 7px;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
            z-index: 2;
        }

        .header h1 {
            font-size: 1.5em;
            color: #1e3c72;
        }

        .network-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #666;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .status-indicator.online {
            background: #4CAF50;
        }

        .status-indicator.offline {
            background: #f44336;
        }

        .header-actions {
            display: flex;
            gap: 15px;
        }

        .network-btn, .admin-btn, .logout-btn {
            background: #1e3c72;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .network-btn:hover, .admin-btn:hover, .logout-btn:hover {
            background: #2a5298;
            transform: translateY(-1px);
        }

        .content {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .news-section, .standings-section, .recent-matches, .top-scorers {
            background: white;
            margin-bottom: 20px;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .news-section:hover, .standings-section:hover, .recent-matches:hover, .top-scorers:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .news-section h2, .standings-section h2, .recent-matches h2, .top-scorers h2 {
            color: #1e3c72;
            margin-bottom: 15px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .news-section h2::before {
            content: 'ğŸ“°';
            font-size: 1.2em;
        }

        .standings-section h2::before {
            content: 'ğŸ†';
            font-size: 1.2em;
        }

        .recent-matches h2::before {
            content: 'âš½';
            font-size: 1.2em;
        }

        .top-scorers h2::before {
            content: 'ğŸ‘Ÿ';
            font-size: 1.2em;
        }

        .standings-table {
            width: 100%;
        }

        .table-header {
            display: grid;
            grid-template-columns: 50px 1fr repeat(7, 60px) 70px;
            gap: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            font-weight: bold;
            color: #666;
            font-size: 14px;
        }

        .table-body {
            margin-top: 10px;
        }

        .team-row {
            display: grid;
            grid-template-columns: 50px 1fr repeat(7, 60px) 70px;
            gap: 10px;
            padding: 15px 10px;
            border-bottom: 1px solid #eee;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .team-row:hover {
            background: #f8f9fa;
        }

        .team-row.champion {
            background: linear-gradient(90deg, rgba(255,215,0,0.1), transparent);
            border-left: 4px solid gold;
        }

        .team {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .team-logo {
            font-size: 1.5em;
        }

        .stats, .points {
            text-align: center;
            font-weight: bold;
        }

        .points {
            color: #1e3c72;
            font-size: 1.1em;
        }

        .matches-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .match-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #1e3c72;
        }

        .match-teams {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .team-name {
            font-weight: bold;
            flex: 1;
        }

        .match-score {
            font-size: 1.2em;
            font-weight: bold;
            color: #1e3c72;
            margin: 0 20px;
        }

        .match-info {
            display: flex;
            gap: 20px;
            font-size: 14px;
            color: #666;
        }

        .scorers-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .scorer-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .scorer-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .scorer-rank {
            width: 25px;
            height: 25px;
            background: #1e3c72;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .scorer-name {
            font-weight: bold;
        }

        .scorer-team {
            font-size: 12px;
            color: #666;
        }

        .scorer-goals {
            font-weight: bold;
            color: #1e3c72;
        }

        /* æ–°é—»æ ·å¼ */
        .news-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .news-item {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid #1e3c72;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .news-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            border-left-color: #ff6b6b;
        }

        .news-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .news-type {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .news-type.important {
            background: #ff6b6b;
            color: white;
        }

        .news-type.normal {
            background: #4ecdc4;
            color: white;
        }

        .news-date {
            font-size: 12px;
            color: #666;
        }

        .news-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .news-content {
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .news-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: #888;
        }

        .news-author {
            font-style: italic;
        }

        /* æ–°é—»è¯¦æƒ…é¡µé¢ */
        .news-detail-header {
            background: white;
            padding: 15px 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .news-detail-content {
            padding: 30px;
            max-width: 800px;
            margin: 0 auto;
        }

        .news-detail-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .news-detail-card .news-detail-header {
            background: none;
            box-shadow: none;
            padding: 0;
            margin-bottom: 20px;
        }

        .news-detail-card .news-type {
            font-size: 14px;
        }

        .news-detail-card .news-title {
            font-size: 2em;
            margin: 20px 0;
            color: #1e3c72;
        }

        .news-detail-card .news-content {
            font-size: 1.1em;
            line-height: 1.8;
            color: #333;
            -webkit-line-clamp: unset;
            display: block;
        }

        .news-detail-card .news-footer {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        /* çƒé˜Ÿé˜µå®¹é¡µé¢ */
        .squad-header {
            background: white;
            padding: 15px 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .back-btn {
            width: 40px;
            height: 40px;
            background: #1e3c72;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: #2a5298;
            transform: scale(1.1);
        }

        .squad-content {
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .football-field {
            background: #2e7d32;
            border: 5px solid white;
            border-radius: 15px;
            position: relative;
            height: 400px;
            margin-bottom: 20px;
        }

        .field {
            width: 100%;
            height: 100%;
            position: relative;
            border: 2px solid white;
        }

        .goal {
            position: absolute;
            width: 2px;
            height: 80px;
            background: white;
            top: 50%;
            transform: translateY(-50%);
        }

        .goal-left {
            left: 0;
        }

        .goal-right {
            right: 0;
        }

        .center-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            border: 2px solid white;
            border-radius: 50%;
        }

        .center-spot {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
        }

        .penalty-area {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 80px;
            height: 200px;
            border: 2px solid white;
        }

        .penalty-left {
            left: 0;
        }

        .penalty-right {
            right: 0;
        }

        .players-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .player-position {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #1e3c72;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            border: 2px solid white;
            transform: translate(-50%, -50%);
        }

        .player-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }

        .player-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .player-number {
            width: 30px;
            height: 30px;
            background: #1e3c72;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .player-name {
            font-weight: bold;
        }

        .player-position-text {
            font-size: 12px;
            color: #666;
        }

        /* ç®¡ç†å‘˜ç™»å½•é¡µé¢ */
        .admin-login-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        }

        .admin-logo {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .admin-logo h2 {
            font-size: 2em;
        }

        #admin-login-form {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
        }

        .input-group {
            position: relative;
            margin-bottom: 25px;
        }

        .input-group i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
        }

        .input-group input {
            width: 100%;
            padding: 15px 15px 15px 45px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #1e3c72;
        }

        .admin-login-btn {
            width: 100%;
            background: linear-gradient(45deg, #1e3c72, #2a5298);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .admin-login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(30,60,114,0.3);
        }

        .admin-header {
            background: white;
            padding: 15px 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .admin-header h2 {
            color: #1e3c72;
        }

        .admin-content {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .admin-section {
            background: white;
            margin-bottom: 20px;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .admin-section h3 {
            color: #1e3c72;
            margin-bottom: 15px;
        }

        .editor-item {
            display: grid;
            grid-template-columns: 150px repeat(7, 1fr);
            gap: 10px;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        .editor-label {
            font-weight: bold;
            color: #333;
        }

        .editor-input, .editor-textarea {
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .editor-input:focus, .editor-textarea:focus {
            outline: none;
            border-color: #1e3c72;
            box-shadow: 0 0 0 3px rgba(30, 60, 114, 0.1);
        }

        .editor-textarea {
            resize: vertical;
            min-height: 80px;
            line-height: 1.5;
        }

        .vs-text {
            text-align: center;
            font-weight: bold;
            color: #666;
            font-size: 1.2em;
        }

        .admin-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .save-btn, .reset-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .save-btn {
            background: #4CAF50;
            color: white;
        }

        .save-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }

        .reset-btn {
            background: #f44336;
            color: white;
        }

        .reset-btn:hover {
            background: #da190b;
            transform: translateY(-2px);
        }

        .error-message {
            background: #ffebee;
            color: #c62828;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            border-left: 4px solid #c62828;
            font-size: 14px;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 10px;
                text-align: center;
                padding: 10px 15px;
            }
            
            .title-section {
                flex-direction: column;
                gap: 10px;
            }
            
            .header-actions {
                justify-content: center;
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .table-header, .team-row {
                grid-template-columns: 30px 1fr repeat(4, 40px) 50px;
                font-size: 11px;
                gap: 5px;
                padding: 8px 5px;
            }
            
            .table-header .stats:nth-child(6),
            .table-header .stats:nth-child(7),
            .table-header .stats:nth-child(8),
            .team-row .stats:nth-child(6),
            .team-row .stats:nth-child(7),
            .team-row .stats:nth-child(8) {
                display: none;
            }
            
            .editor-item {
                grid-template-columns: 1fr;
                gap: 5px;
            }
            
            .match-info {
                flex-direction: column;
                gap: 5px;
                font-size: 12px;
            }
            
            .football-field {
                height: 250px;
            }
            
            .content {
                padding: 10px;
            }
            
            .news-section, .standings-section, .recent-matches, .top-scorers {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            .news-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .player-list {
                grid-template-columns: 1fr;
            }
            
            .admin-content {
                padding: 10px;
            }
            
            .admin-section {
                padding: 15px;
            }
        }

        @media (max-width: 480px) {
            .table-header, .team-row {
                grid-template-columns: 25px 1fr repeat(3, 35px) 45px;
                font-size: 10px;
            }
            
            .table-header .stats:nth-child(5),
            .team-row .stats:nth-child(5) {
                display: none;
            }
            
            .match-teams {
                flex-direction: column;
                gap: 5px;
            }
            
            .match-score {
                margin: 5px 0;
            }
            
            .football-field {
                height: 200px;
            }
            
            .player-position {
                width: 25px;
                height: 25px;
                font-size: 10px;
            }
            
            .chat-section {
                padding: 15px;
            }
            
            .chat-container {
                height: 250px;
            }
            
            .chat-input-container {
                flex-direction: column;
                gap: 8px;
            }
            
            .send-btn {
                width: 100%;
            }
        }

        /* èŠå¤©å®¤æ ·å¼ */
        .chat-section {
            background: white;
            margin-bottom: 20px;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .chat-section:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .chat-section h2 {
            color: #1e3c72;
            margin-bottom: 15px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chat-section h2::before {
            content: 'ğŸ’¬';
            font-size: 1.2em;
        }

        .chat-container {
            display: flex;
            flex-direction: column;
            height: 300px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background: #f8f9fa;
        }

        .chat-input-container {
            display: flex;
            gap: 10px;
            padding: 15px;
            background: white;
            border-top: 1px solid #e0e0e0;
        }

        .chat-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .chat-input:focus {
            outline: none;
            border-color: #1e3c72;
        }

        .send-btn {
            background: #1e3c72;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .send-btn:hover {
            background: #2a5298;
            transform: translateY(-1px);
        }
    </style>
</head>
<body>
    <!-- ä¸»é¡µé¢ -->
    <div id="main-page" class="page active">
        <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
        <div class="header">
            <div class="title-section">
                <div class="csl-title-logo">
                    <div class="title-logo-circle">
                        <div class="title-logo-text">CSL</div>
                        <div class="title-logo-star">â˜…</div>
                    </div>
                </div>
                <h1>å…­äºŒè¶…çº§è”èµ›</h1>
                <div class="network-status">
                    <span id="network-status-text">ç¦»çº¿æ¨¡å¼</span>
                    <div class="status-indicator" id="network-indicator"></div>
                </div>
            </div>
            <div class="header-actions">
                <button class="network-btn" id="network-btn" title="æ£€æŸ¥ç½‘ç»œè¿æ¥">
                    <span>ğŸŒ æ£€æŸ¥ç½‘ç»œ</span>
                </button>
                <button class="admin-btn" id="admin-btn">
                    <span>ç®¡ç†å‘˜æ¨¡å¼</span>
                </button>
                <div class="logout-btn" id="logout-btn">
                    <span>é€€å‡º</span>
                </div>
            </div>
        </div>

        <!-- å†…å®¹åŒºåŸŸ -->
        <div class="content">
            <!-- å…­äºŒè¶³çƒæ–°é—» -->
            <div class="news-section">
                <h2>å…­äºŒè¶³çƒæ–°é—»</h2>
                <div class="news-container" id="news-container">
                    <!-- æ–°é—»æ•°æ®å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>

            <!-- èµ›äº‹ç§¯åˆ†æ¦œ -->
            <div class="standings-section">
                <h2>èµ›äº‹ç§¯åˆ†æ¦œ</h2>
                <div class="standings-table">
                    <div class="table-header">
                        <div class="rank">æ’å</div>
                        <div class="team">çƒé˜Ÿ</div>
                        <div class="stats">åœºæ¬¡</div>
                        <div class="stats">èƒœ</div>
                        <div class="stats">å¹³</div>
                        <div class="stats">è´Ÿ</div>
                        <div class="stats">è¿›çƒ</div>
                        <div class="stats">å¤±çƒ</div>
                        <div class="stats">å‡€èƒœçƒ</div>
                        <div class="points">ç§¯åˆ†</div>
                    </div>
                    <div class="table-body" id="standings-body">
                        <!-- ç§¯åˆ†æ¦œæ•°æ®å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>

            <!-- æœ€è¿‘æ¯”èµ› -->
            <div class="recent-matches">
                <h2>æœ€è¿‘æ¯”èµ›</h2>
                <div class="matches-list" id="matches-list">
                    <!-- æ¯”èµ›æ•°æ®å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>

            <!-- å°„æ‰‹æ¦œ -->
            <div class="top-scorers">
                <h2>å°„æ‰‹æ¦œ</h2>
                <div class="scorers-list" id="scorers-list">
                    <!-- å°„æ‰‹æ•°æ®å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>

            <!-- å®æ—¶èŠå¤©å®¤ -->
            <div class="chat-section">
                <h2>ğŸ’¬ å®æ—¶èŠå¤©å®¤</h2>
                <div class="chat-container">
                    <div id="chat-messages" class="chat-messages"></div>
                    <div class="chat-input-container">
                        <input type="text" id="chat-input" class="chat-input" placeholder="è¾“å…¥æ¶ˆæ¯..." maxlength="100">
                        <button id="send-chat" class="send-btn">å‘é€</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- çƒé˜Ÿé˜µå®¹é¡µé¢ -->
    <div id="team-squad-page" class="page">
        <div class="squad-header">
            <div class="back-btn" id="back-to-main">
                â†
            </div>
            <h2 id="squad-team-name">çƒé˜Ÿé˜µå®¹</h2>
        </div>
        <div class="squad-content">
            <div class="football-field">
                <div class="field">
                    <div class="goal goal-left"></div>
                    <div class="goal goal-right"></div>
                    <div class="center-circle"></div>
                    <div class="center-spot"></div>
                    <div class="penalty-area penalty-left"></div>
                    <div class="penalty-area penalty-right"></div>
                    <div class="players-container" id="players-container">
                        <!-- çƒå‘˜ä½ç½®å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
            <div class="player-list" id="player-list">
                <!-- çƒå‘˜åˆ—è¡¨å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <!-- ç®¡ç†å‘˜ç™»å½•é¡µé¢ -->
    <div id="admin-login-page" class="page">
        <div class="admin-login-container">
            <div class="back-btn" id="back-to-main-admin">
                â†
            </div>
            <div class="admin-logo">
                <h2>ç®¡ç†å‘˜ç™»å½•</h2>
            </div>
            <form id="admin-login-form">
                <div class="input-group">
                    <input type="password" id="admin-password" placeholder="è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç " required>
                </div>
                <button type="submit" class="admin-login-btn">ç™»å½•</button>
            </form>
        </div>
    </div>

    <!-- æ–°é—»è¯¦æƒ…é¡µé¢ -->
    <div id="news-detail-page" class="page">
        <div class="news-detail-header">
            <div class="back-btn" id="back-to-main-from-news">
                â†
            </div>
            <h2>æ–°é—»è¯¦æƒ…</h2>
        </div>
        <div class="news-detail-content">
            <div class="news-detail-card">
                <div class="news-detail-header">
                    <span class="news-type" id="news-detail-type">èµ›äº‹å¿«è®¯</span>
                    <span class="news-date" id="news-detail-date">2024-11-10</span>
                </div>
                <h1 class="news-title" id="news-detail-title">æ–°é—»æ ‡é¢˜</h1>
                <div class="news-content" id="news-detail-content">æ–°é—»å†…å®¹</div>
                <div class="news-footer">
                    <span class="news-author" id="news-detail-author">ä½œè€…</span>
                </div>
            </div>
        </div>
    </div>

    <!-- ç®¡ç†å‘˜ç¼–è¾‘é¡µé¢ -->
    <div id="admin-edit-page" class="page">
        <div class="admin-header">
            <div class="back-btn" id="back-to-main-from-admin">
                â†
            </div>
            <h2>ç®¡ç†å‘˜æ¨¡å¼ - æ•°æ®ç¼–è¾‘</h2>
        </div>
        <div class="admin-content">
            <div class="admin-section">
                <h3>æ–°é—»æ•°æ®ç¼–è¾‘</h3>
                <div class="news-editor" id="news-editor">
                    <!-- æ–°é—»ç¼–è¾‘è¡¨å•å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
            <div class="admin-section">
                <h3>çƒé˜Ÿæ•°æ®ç¼–è¾‘</h3>
                <div class="team-editor" id="team-editor">
                    <!-- çƒé˜Ÿç¼–è¾‘è¡¨å•å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
            <div class="admin-section">
                <h3>çƒå‘˜æ•°æ®ç¼–è¾‘</h3>
                <div class="player-editor" id="player-editor">
                    <!-- çƒå‘˜ç¼–è¾‘è¡¨å•å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
            <div class="admin-section">
                <h3>å°„æ‰‹æ¦œæ•°æ®ç¼–è¾‘</h3>
                <div class="scorer-editor" id="scorer-editor">
                    <!-- å°„æ‰‹æ¦œç¼–è¾‘è¡¨å•å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
            <div class="admin-section">
                <h3>æ¯”èµ›æ•°æ®ç¼–è¾‘</h3>
                <div class="match-editor" id="match-editor">
                    <!-- æ¯”èµ›ç¼–è¾‘è¡¨å•å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
            <div class="admin-actions">
                <button class="save-btn" id="save-data-btn">
                    <span>ä¿å­˜æ•°æ®</span>
                </button>
                <button class="reset-btn" id="reset-data-btn">
                    <span>é‡ç½®æ•°æ®</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // åº”ç”¨çŠ¶æ€ç®¡ç†
        const appState = {
            isAuthenticated: true, // ç›´æ¥è®¤è¯ï¼Œæ— éœ€å¯†ç 
            isAdminMode: false,
            adminPassword: 'QAZWSX1092',
            isOnline: false,
            serverStatus: 'offline', // offline, connecting, online, error
            serverUrl: '',
            connectionType: 'local' // local, lan, public
        };

        // èŠå¤©å®¤åŠŸèƒ½
        const chatRoom = {
            messages: [],
            userId: 'user_' + Math.random().toString(36).substr(2, 9),
            userName: 'ç”¨æˆ·' + Math.floor(Math.random() * 1000)
        };

        // é»˜è®¤è”èµ›æ•°æ®
        const defaultLeagueData = {
            news: [
                {
                    id: 1,
                    title: 'å…­äºŒè¶…çº§è”èµ›æ­£å¼å¼€èµ›ï¼',
                    content: 'å…­äºŒç­è¶³çƒè”èµ›æ­£å¼æ‹‰å¼€å¸·å¹•ï¼Œä¸‰æ”¯çƒé˜Ÿå°†å±•å¼€æ¿€çƒˆè§’é€ï¼Œäº‰å¤ºå† å†›è£èª‰ï¼',
                    date: '2024-11-01',
                    author: 'ç®¡ç†å‘˜',
                    type: 'é‡è¦é€šçŸ¥'
                },
                {
                    id: 2,
                    title: 'é—ªç”µé˜Ÿè±ªå–ä¸‰è¿èƒœ',
                    content: 'é—ªç”µé˜Ÿåœ¨å‰ä¸‰è½®æ¯”èµ›ä¸­è¡¨ç°å‡ºè‰²ï¼Œä»¥å…¨èƒœæˆ˜ç»©æš‚åˆ—ç§¯åˆ†æ¦œé¦–ä½ã€‚',
                    date: '2024-11-05',
                    author: 'ç®¡ç†å‘˜',
                    type: 'èµ›äº‹å¿«è®¯'
                },
                {
                    id: 3,
                    title: 'å°„æ‰‹æ¦œç«äº‰æ¿€çƒˆ',
                    content: 'å¼ ä¸‰ä»¥8çƒé¢†è·‘å°„æ‰‹æ¦œï¼Œæå››å’Œç‹äº”ç´§éšå…¶åï¼Œé‡‘é´å¥–äº‰å¤ºå¼‚å¸¸æ¿€çƒˆã€‚',
                    date: '2024-11-10',
                    author: 'ç®¡ç†å‘˜',
                    type: 'çƒå‘˜åŠ¨æ€'
                }
            ],
            
            teams: [
                {
                    id: 1,
                    name: 'é—ªç”µé˜Ÿ',
                    shortName: 'é—ªç”µ',
                    logo: 'âš¡',
                    played: 6,
                    won: 4,
                    drawn: 1,
                    lost: 1,
                    goalsFor: 12,
                    goalsAgainst: 5,
                    points: 13,
                    squad: [
                        { number: 1, name: 'å¼ ä¸‰', position: 'GK', x: 10, y: 50 },
                        { number: 2, name: 'æå››', position: 'DF', x: 25, y: 30 },
                        { number: 3, name: 'ç‹äº”', position: 'FW', x: 60, y: 50 }
                    ]
                },
                {
                    id: 2,
                    name: 'çŒ›è™é˜Ÿ',
                    shortName: 'çŒ›è™',
                    logo: 'ğŸ¯',
                    played: 6,
                    won: 3,
                    drawn: 2,
                    lost: 1,
                    goalsFor: 10,
                    goalsAgainst: 6,
                    points: 11,
                    squad: [
                        { number: 1, name: 'å´å', position: 'GK', x: 10, y: 50 },
                        { number: 2, name: 'éƒ‘åä¸€', position: 'DF', x: 25, y: 30 },
                        { number: 3, name: 'å­™åå…­', position: 'FW', x: 60, y: 50 }
                    ]
                },
                {
                    id: 3,
                    name: 'é£é¹°é˜Ÿ',
                    shortName: 'é£é¹°',
                    logo: 'ğŸ¦…',
                    played: 6,
                    won: 2,
                    drawn: 1,
                    lost: 3,
                    goalsFor: 8,
                    goalsAgainst: 9,
                    points: 7,
                    squad: [
                        { number: 1, name: 'å•æ˜Šæ¢', position: 'GK', x: 10, y: 50 },
                        { number: 2, name: 'åå«', position: 'DF', x: 25, y: 30 },
                        { number: 3, name: 'åˆ˜æ—­é˜³', position: 'FW', x: 60, y: 50 }
                    ]
                }
            ],
            
            recentMatches: [
                {
                    id: 1,
                    homeTeam: 'é—ªç”µé˜Ÿ',
                    awayTeam: 'çŒ›è™é˜Ÿ',
                    homeScore: 2,
                    awayScore: 1,
                    date: '2024-11-10',
                    time: '15:00',
                    venue: 'å­¦æ ¡æ“åœº'
                },
                {
                    id: 2,
                    homeTeam: 'é£é¹°é˜Ÿ',
                    awayTeam: 'é—ªç”µé˜Ÿ',
                    homeScore: 0,
                    awayScore: 3,
                    date: '2024-11-08',
                    time: '16:30',
                    venue: 'å­¦æ ¡æ“åœº'
                },
                {
                    id: 3,
                    homeTeam: 'çŒ›è™é˜Ÿ',
                    awayTeam: 'é£é¹°é˜Ÿ',
                    homeScore: 2,
                    awayScore: 2,
                    date: '2024-11-05',
                    time: '14:00',
                    venue: 'å­¦æ ¡æ“åœº'
                }
            ],
            
            topScorers: [
                {
                    rank: 1,
                    name: 'å¼ ä¸‰',
                    team: 'é—ªç”µé˜Ÿ',
                    goals: 8,
                    assists: 3
                },
                {
                    rank: 2,
                    name: 'æå››',
                    team: 'çŒ›è™é˜Ÿ',
                    goals: 6,
                    assists: 4
                },
                {
                    rank: 3,
                    name: 'ç‹äº”',
                    team: 'é£é¹°é˜Ÿ',
                    goals: 5,
                    assists: 2
                }
            ]
        };

        // å½“å‰è”èµ›æ•°æ®
        let leagueData = { ...defaultLeagueData };

        // æ›´æ–°ç½‘ç»œçŠ¶æ€æ˜¾ç¤º
        function updateNetworkStatus(status, connectionType = 'local') {
            const statusText = document.getElementById('network-status-text');
            const indicator = document.getElementById('network-indicator');
            
            appState.serverStatus = status;
            appState.connectionType = connectionType;
            
            switch (status) {
                case 'online':
                    statusText.textContent = connectionType === 'public' ? 'ğŸŒ å…¬ç½‘è¿æ¥' : 
                                           connectionType === 'lan' ? 'ğŸ  å±€åŸŸç½‘è¿æ¥' : 'ğŸ’» æœ¬åœ°è¿æ¥';
                    indicator.className = 'status-indicator online';
                    appState.isOnline = true;
                    break;
                case 'connecting':
                    statusText.textContent = 'ğŸ”„ è¿æ¥æœåŠ¡å™¨...';
                    indicator.className = 'status-indicator offline';
                    appState.isOnline = false;
                    break;
                case 'error':
                    statusText.textContent = 'âŒ è¿æ¥å¤±è´¥';
                    indicator.className = 'status-indicator offline';
                    appState.isOnline = false;
                    break;
                default:
                    statusText.textContent = 'ğŸ“´ æœåŠ¡å™¨ç¦»çº¿';
                    indicator.className = 'status-indicator offline';
                    appState.isOnline = false;
            }
        }

        // æ£€æµ‹æœåŠ¡å™¨çŠ¶æ€
        async function checkServerStatus(serverUrl) {
            updateNetworkStatus('connecting');
            
            try {
                const response = await fetch(`${serverUrl}/api/health`, {
                    method: 'GET',
                    timeout: 5000
                });
                
                if (response.ok) {
                    const data = await response.json();
                    appState.serverUrl = serverUrl;
                    
                    // åˆ¤æ–­è¿æ¥ç±»å‹
                    let connectionType = 'local';
                    if (serverUrl.includes('localhost') || serverUrl.includes('127.0.0.1')) {
                        connectionType = 'local';
                    } else if (serverUrl.includes('192.168.') || serverUrl.includes('10.') || serverUrl.includes('172.')) {
                        connectionType = 'lan';
                    } else {
                        connectionType = 'public';
                    }
                    
                    updateNetworkStatus('online', connectionType);
                    console.log('æœåŠ¡å™¨è¿æ¥æˆåŠŸ:', data);
                    return true;
                } else {
                    updateNetworkStatus('error');
                    console.error('æœåŠ¡å™¨å“åº”é”™è¯¯:', response.status);
                    return false;
                }
            } catch (error) {
                updateNetworkStatus('error');
                console.error('æœåŠ¡å™¨è¿æ¥å¤±è´¥:', error.message);
                return false;
            }
        }

        // è‡ªåŠ¨æ£€æµ‹å¯ç”¨çš„æœåŠ¡å™¨
        async function autoDetectServer() {
            const servers = [
                'http://localhost:3000',
                'http://127.0.0.1:3000'
            ];
            
            // å°è¯•è·å–å±€åŸŸç½‘IP
            try {
                const response = await fetch('http://localhost:3000/api/network-info');
                if (response.ok) {
                    const data = await response.json();
                    if (data.lanIP) {
                        servers.push(`http://${data.lanIP}:3000`);
                    }
                }
            } catch (error) {
                // å¿½ç•¥é”™è¯¯ï¼Œç»§ç»­å°è¯•å…¶ä»–æœåŠ¡å™¨
            }
            
            for (const server of servers) {
                const isConnected = await checkServerStatus(server);
                if (isConnected) {
                    return true;
                }
                
                // ç­‰å¾…1ç§’å†å°è¯•ä¸‹ä¸€ä¸ª
                await new Promise(resolve => setTimeout(resolve, 1000));
            }
            
            updateNetworkStatus('offline');
            return false;
        }

        // æ‰‹åŠ¨æ£€æŸ¥ç½‘ç»œè¿æ¥
        function manualCheckNetwork() {
            const serverUrl = prompt('è¯·è¾“å…¥æœåŠ¡å™¨åœ°å€ (ä¾‹å¦‚: http://192.168.1.100:3000):', appState.serverUrl || 'http://localhost:3000');
            
            if (serverUrl && serverUrl.trim()) {
                checkServerStatus(serverUrl.trim());
            }
        }

        // æ•°æ®æŒä¹…åŒ–å‡½æ•°
        function saveData() {
            localStorage.setItem('footballLeagueData', JSON.stringify(leagueData));
        }

        async function loadData() {
            // é¦–å…ˆå°è¯•ä»æœåŠ¡å™¨åŠ è½½æ•°æ®
            if (appState.isOnline && appState.serverUrl) {
                try {
                    const response = await fetch(`${appState.serverUrl}/api/data`);
                    if (response.ok) {
                        const serverData = await response.json();
                        leagueData = serverData;
                        console.log('ä»æœåŠ¡å™¨åŠ è½½æ•°æ®æˆåŠŸ');
                        
                        // åŒæ­¥åˆ°æœ¬åœ°å­˜å‚¨
                        localStorage.setItem('footballLeagueData', JSON.stringify(leagueData));
                        return;
                    }
                } catch (error) {
                    console.log('æœåŠ¡å™¨æ•°æ®åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®:', error.message);
                }
            }
            
            // å¦‚æœæœåŠ¡å™¨ä¸å¯ç”¨ï¼Œä½¿ç”¨æœ¬åœ°å­˜å‚¨æ•°æ®
            const savedData = localStorage.getItem('footballLeagueData');
            if (savedData) {
                try {
                    leagueData = JSON.parse(savedData);
                    console.log('ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®æˆåŠŸ');
                } catch (error) {
                    console.error('æœ¬åœ°å­˜å‚¨æ•°æ®æŸåï¼Œä½¿ç”¨é»˜è®¤æ•°æ®');
                    leagueData = { ...defaultLeagueData };
                    saveData();
                }
            } else {
                console.log('æœ¬åœ°å­˜å‚¨æ— æ•°æ®ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®');
                leagueData = { ...defaultLeagueData };
                saveData();
            }
        }

        // åŒæ­¥æ•°æ®åˆ°æœåŠ¡å™¨
        async function syncDataToServer() {
            if (!appState.isOnline || !appState.serverUrl) {
                console.log('æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œè·³è¿‡æ•°æ®åŒæ­¥');
                return false;
            }
            
            try {
                const response = await fetch(`${appState.serverUrl}/api/data`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(leagueData)
                });
                
                if (response.ok) {
                    console.log('æ•°æ®åŒæ­¥åˆ°æœåŠ¡å™¨æˆåŠŸ');
                    return true;
                } else {
                    console.error('æ•°æ®åŒæ­¥å¤±è´¥:', response.status);
                    return false;
                }
            } catch (error) {
                console.error('æ•°æ®åŒæ­¥é”™è¯¯:', error.message);
                return false;
            }
        }

        // é¡µé¢åˆ‡æ¢å‡½æ•°
        function showPage(pageId) {
            const currentPage = document.querySelector('.page.active');
            const nextPage = document.getElementById(pageId);
            
            if (currentPage && currentPage !== nextPage) {
                // æ·»åŠ æ·¡å‡ºåŠ¨ç”»
                currentPage.style.opacity = '0';
                currentPage.style.transform = 'translateY(-20px)';
                
                setTimeout(() => {
                    currentPage.classList.remove('active');
                    
                    // æ˜¾ç¤ºæ–°é¡µé¢
                    nextPage.classList.add('active');
                    
                    // è§¦å‘é‡æ’ä»¥åº”ç”¨åŠ¨ç”»
                    void nextPage.offsetWidth;
                    
                    // æ·»åŠ æ·¡å…¥åŠ¨ç”»
                    nextPage.style.opacity = '1';
                    nextPage.style.transform = 'translateY(0)';
                    
                    // å¦‚æœæ˜¯ä¸»é¡µé¢ï¼Œç¡®ä¿æ¸²æŸ“æ•°æ®
                    if (pageId === 'main-page' && appState.isAuthenticated) {
                        renderLeagueData();
                    }
                }, 300);
            } else if (!currentPage) {
                // é¦–æ¬¡æ˜¾ç¤ºé¡µé¢
                nextPage.classList.add('active');
                nextPage.style.opacity = '1';
                nextPage.style.transform = 'translateY(0)';
                
                // å¦‚æœæ˜¯ä¸»é¡µé¢ï¼Œç¡®ä¿æ¸²æŸ“æ•°æ®
                if (pageId === 'main-page' && appState.isAuthenticated) {
                    renderLeagueData();
                }
            }
        }

        // ç®¡ç†å‘˜ç™»å½•åŠŸèƒ½
        function handleAdminLogin(event) {
            event.preventDefault();
            
            const password = document.getElementById('admin-password').value;
            
            // æ¸…é™¤ä¹‹å‰çš„é”™è¯¯ä¿¡æ¯
            const existingError = document.querySelector('.error-message');
            if (existingError) {
                existingError.remove();
            }
            
            if (!password) {
                showError('è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç ');
                return;
            }
            
            if (password === appState.adminPassword) {
                appState.isAdminMode = true;
                showPage('admin-edit-page');
                renderAdminEditor();
            } else {
                showError('ç®¡ç†å‘˜å¯†ç é”™è¯¯');
                // æ¸…ç©ºå¯†ç æ¡†
                document.getElementById('admin-password').value = '';
                document.getElementById('admin-password').focus();
            }
        }

        // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
        function showError(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.innerHTML = `${message}`;
            
            const currentPage = document.querySelector('.page.active');
            const form = currentPage.querySelector('form');
            if (form) {
                form.appendChild(errorDiv);
            }
        }

        // æ¸²æŸ“æ–°é—»
        function renderNews() {
            const newsContainer = document.getElementById('news-container');
            
            newsContainer.innerHTML = leagueData.news.map(news => {
                const newsDate = new Date(news.date);
                const formattedDate = newsDate.toLocaleDateString('zh-CN', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });
                
                return `
                    <div class="news-item" onclick="showNewsDetail(${news.id})">
                        <div class="news-header">
                            <span class="news-type ${news.type === 'é‡è¦é€šçŸ¥' ? 'important' : 'normal'}">${news.type}</span>
                            <span class="news-date">${formattedDate}</span>
                        </div>
                        <h3 class="news-title">${news.title}</h3>
                        <p class="news-content">${news.content}</p>
                        <div class="news-footer">
                            <span class="news-author">${news.author}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // æ˜¾ç¤ºæ–°é—»è¯¦æƒ…
        function showNewsDetail(newsId) {
            const news = leagueData.news.find(n => n.id === newsId);
            if (!news) return;
            
            const newsDate = new Date(news.date);
            const formattedDate = newsDate.toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            document.getElementById('news-detail-title').textContent = news.title;
            document.getElementById('news-detail-content').textContent = news.content;
            document.getElementById('news-detail-date').textContent = formattedDate;
            document.getElementById('news-detail-author').textContent = news.author;
            document.getElementById('news-detail-type').textContent = news.type;
            
            showPage('news-detail-page');
        }

        // æ¸²æŸ“ç§¯åˆ†æ¦œ
        function renderStandings() {
            const standingsBody = document.getElementById('standings-body');
            
            // æŒ‰ç§¯åˆ†æ’åº
            const sortedTeams = [...leagueData.teams].sort((a, b) => b.points - a.points);
            
            standingsBody.innerHTML = sortedTeams.map((team, index) => {
                const goalDifference = team.goalsFor - team.goalsAgainst;
                const isChampion = index === 0 ? 'champion' : '';
                
                return `
                    <div class="team-row ${isChampion}" onclick="showTeamSquad(${team.id})">
                        <div class="rank">${index + 1}</div>
                        <div class="team">
                            <div class="team-logo">${team.logo}</div>
                            <span>${team.name}</span>
                        </div>
                        <div class="stats">${team.played}</div>
                        <div class="stats">${team.won}</div>
                        <div class="stats">${team.drawn}</div>
                        <div class="stats">${team.lost}</div>
                        <div class="stats">${team.goalsFor}</div>
                        <div class="stats">${team.goalsAgainst}</div>
                        <div class="stats">${goalDifference > 0 ? '+' : ''}${goalDifference}</div>
                        <div class="points">${team.points}</div>
                    </div>
                `;
            }).join('');
        }

        // æ¸²æŸ“æœ€è¿‘æ¯”èµ›
        function renderRecentMatches() {
            const matchesList = document.getElementById('matches-list');
            
            matchesList.innerHTML = leagueData.recentMatches.map(match => {
                const matchDate = new Date(match.date);
                const formattedDate = matchDate.toLocaleDateString('zh-CN', {
                    month: 'short',
                    day: 'numeric'
                });
                
                return `
                    <div class="match-item">
                        <div class="match-teams">
                            <div class="team-name">${match.homeTeam}</div>
                            <div class="match-score">${match.homeScore} - ${match.awayScore}</div>
                            <div class="team-name">${match.awayTeam}</div>
                        </div>
                        <div class="match-info">
                            <span>ğŸ“… ${formattedDate}</span>
                            <span>ğŸ•’ ${match.time}</span>
                            <span>ğŸ“ ${match.venue}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // æ¸²æŸ“å°„æ‰‹æ¦œ
        function renderTopScorers() {
            const scorersList = document.getElementById('scorers-list');
            
            scorersList.innerHTML = leagueData.topScorers.map(scorer => {
                return `
                    <div class="scorer-item">
                        <div class="scorer-info">
                            <div class="scorer-rank">${scorer.rank}</div>
                            <div>
                                <div class="scorer-name">${scorer.name}</div>
                                <div class="scorer-team">${scorer.team}</div>
                            </div>
                        </div>
                        <div class="scorer-goals">${scorer.goals} çƒ</div>
                    </div>
                `;
            }).join('');
        }

        // æ˜¾ç¤ºçƒé˜Ÿé˜µå®¹
        function showTeamSquad(teamId) {
            const team = leagueData.teams.find(t => t.id === teamId);
            if (!team) return;
            
            document.getElementById('squad-team-name').textContent = `${team.name} é˜µå®¹`;
            renderTeamSquad(team);
            showPage('team-squad-page');
        }

        // æ¸²æŸ“çƒé˜Ÿé˜µå®¹
        function renderTeamSquad(team) {
            const playersContainer = document.getElementById('players-container');
            const playerList = document.getElementById('player-list');
            
            // æ¸…ç©ºå®¹å™¨ï¼Œç¡®ä¿åªæ˜¾ç¤ºå®é™…çš„çƒå‘˜
            playersContainer.innerHTML = '';
            playerList.innerHTML = '';
            
            // åªæ¸²æŸ“çƒé˜Ÿä¸­å®é™…å­˜åœ¨çš„3ä¸ªçƒå‘˜ä½ç½®
            team.squad.forEach(player => {
                const playerElement = document.createElement('div');
                playerElement.className = 'player-position';
                playerElement.style.left = `${player.x}%`;
                playerElement.style.top = `${player.y}%`;
                playerElement.title = `${player.name} - ${getPositionName(player.position)}`;
                playerElement.textContent = player.number;
                playersContainer.appendChild(playerElement);
                
                const playerItem = document.createElement('div');
                playerItem.className = 'player-item';
                playerItem.innerHTML = `
                    <div class="player-number">${player.number}</div>
                    <div class="player-info">
                        <div class="player-name">${player.name}</div>
                        <div class="player-position-text">${getPositionName(player.position)}</div>
                    </div>
                `;
                playerList.appendChild(playerItem);
            });
        }

        // è·å–ä½ç½®åç§°
        function getPositionName(position) {
            const positions = {
                'GK': 'å®ˆé—¨å‘˜',
                'DF': 'åå«',
                'MF': 'ä¸­åœº',
                'FW': 'å‰é”‹'
            };
            return positions[position] || position;
        }

        // æ¸²æŸ“æ‰€æœ‰è”èµ›æ•°æ®
        function renderLeagueData() {
            renderNews();
            renderStandings();
            renderRecentMatches();
            renderTopScorers();
        }

        // å‘é€èŠå¤©æ¶ˆæ¯
        async function sendChatMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (message) {
                const chatMessage = {
                    id: Date.now(),
                    user: chatRoom.userName,
                    text: message,
                    time: new Date().toLocaleTimeString()
                };
                
                // æ·»åŠ åˆ°æœ¬åœ°èŠå¤©è®°å½•
                chatRoom.messages.push(chatMessage);
                
                // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                localStorage.setItem('chatMessages', JSON.stringify(chatRoom.messages));
                
                // æ¸²æŸ“æ¶ˆæ¯
                renderChatMessages();
                
                // å¦‚æœåœ¨çº¿ï¼Œå‘é€åˆ°æœåŠ¡å™¨
                if (appState.isOnline && appState.serverUrl) {
                    try {
                        await fetch(`${appState.serverUrl}/api/chat/send`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                sender: chatRoom.userName,
                                content: message
                            })
                        });
                    } catch (error) {
                        console.log('å‘é€åˆ°æœåŠ¡å™¨å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°èŠå¤©:', error.message);
                    }
                }
                
                // æ¸…ç©ºè¾“å…¥æ¡†
                input.value = '';
                input.focus();
            }
        }

        // æ¸²æŸ“èŠå¤©æ¶ˆæ¯
        function renderChatMessages() {
            const container = document.getElementById('chat-messages');
            container.innerHTML = '';
            
            chatRoom.messages.forEach(msg => {
                const messageDiv = document.createElement('div');
                messageDiv.style.cssText = 'margin-bottom: 8px; padding: 5px; background: #f8f9fa; border-radius: 5px;';
                messageDiv.innerHTML = `
                    <strong>${msg.user}</strong> 
                    <span style="color: #666; font-size: 12px;">${msg.time}</span><br>
                    ${msg.text}
                `;
                container.appendChild(messageDiv);
            });
            
            // æ»šåŠ¨åˆ°åº•éƒ¨
            container.scrollTop = container.scrollHeight;
        }

        // åŠ è½½èŠå¤©æ¶ˆæ¯
        function loadChatMessages() {
            const savedMessages = localStorage.getItem('chatMessages');
            if (savedMessages) {
                chatRoom.messages = JSON.parse(savedMessages);
            }
            renderChatMessages();
        }

        // æ¸²æŸ“ç®¡ç†å‘˜ç¼–è¾‘å™¨
        function renderAdminEditor() {
            // æ–°é—»æ•°æ®ç¼–è¾‘å™¨
            const newsEditor = document.getElementById('news-editor');
            newsEditor.innerHTML = leagueData.news.map(news => {
                return `
                    <div class="editor-item">
                        <div class="editor-label">æ–°é—» ${news.id}</div>
                        <input type="text" class="editor-input" value="${news.title}" data-news="${news.id}" data-field="title" placeholder="æ–°é—»æ ‡é¢˜">
                        <textarea class="editor-textarea" data-news="${news.id}" data-field="content" placeholder="æ–°é—»å†…å®¹">${news.content}</textarea>
                        <input type="date" class="editor-input" value="${news.date}" data-news="${news.id}" data-field="date">
                        <input type="text" class="editor-input" value="${news.author}" data-news="${news.id}" data-field="author" placeholder="ä½œè€…">
                        <select class="editor-input" data-news="${news.id}" data-field="type">
                            <option value="é‡è¦é€šçŸ¥" ${news.type === 'é‡è¦é€šçŸ¥' ? 'selected' : ''}>é‡è¦é€šçŸ¥</option>
                            <option value="èµ›äº‹å¿«è®¯" ${news.type === 'èµ›äº‹å¿«è®¯' ? 'selected' : ''}>èµ›äº‹å¿«è®¯</option>
                            <option value="çƒå‘˜åŠ¨æ€" ${news.type === 'çƒå‘˜åŠ¨æ€' ? 'selected' : ''}>çƒå‘˜åŠ¨æ€</option>
                        </select>
                    </div>
                `;
            }).join('');
            
            // çƒé˜Ÿæ•°æ®ç¼–è¾‘å™¨
            const teamEditor = document.getElementById('team-editor');
            teamEditor.innerHTML = leagueData.teams.map(team => {
                return `
                    <div class="editor-item">
                        <div class="editor-label">${team.name}</div>
                        <input type="number" class="editor-input" value="${team.played}" data-team="${team.id}" data-field="played" placeholder="åœºæ¬¡">
                        <input type="number" class="editor-input" value="${team.won}" data-team="${team.id}" data-field="won" placeholder="èƒœ">
                        <input type="number" class="editor-input" value="${team.drawn}" data-team="${team.id}" data-field="drawn" placeholder="å¹³">
                        <input type="number" class="editor-input" value="${team.lost}" data-team="${team.id}" data-field="lost" placeholder="è´Ÿ">
                        <input type="number" class="editor-input" value="${team.goalsFor}" data-team="${team.id}" data-field="goalsFor" placeholder="è¿›çƒ">
                        <input type="number" class="editor-input" value="${team.goalsAgainst}" data-team="${team.id}" data-field="goalsAgainst" placeholder="å¤±çƒ">
                        <input type="number" class="editor-input" value="${team.points}" data-team="${team.id}" data-field="points" placeholder="ç§¯åˆ†">
                    </div>
                `;
            }).join('');
            
            // çƒå‘˜æ•°æ®ç¼–è¾‘å™¨
            const playerEditor = document.getElementById('player-editor');
            playerEditor.innerHTML = leagueData.teams.map(team => {
                return team.squad.map(player => {
                    return `
                        <div class="editor-item">
                            <div class="editor-label">${team.name} - ${player.name}</div>
                            <input type="number" class="editor-input" value="${player.number}" data-team="${team.id}" data-player="${player.number}" data-field="number" placeholder="å·ç ">
                            <input type="text" class="editor-input" value="${player.name}" data-team="${team.id}" data-player="${player.number}" data-field="name" placeholder="å§“å">
                            <select class="editor-input" data-team="${team.id}" data-player="${player.number}" data-field="position">
                                <option value="GK" ${player.position === 'GK' ? 'selected' : ''}>å®ˆé—¨å‘˜</option>
                                <option value="DF" ${player.position === 'DF' ? 'selected' : ''}>åå«</option>
                                <option value="FW" ${player.position === 'FW' ? 'selected' : ''}>å‰é”‹</option>
                            </select>
                            <input type="number" class="editor-input" value="${player.x}" data-team="${team.id}" data-player="${player.number}" data-field="x" placeholder="Xä½ç½®">
                            <input type="number" class="editor-input" value="${player.y}" data-team="${team.id}" data-player="${player.number}" data-field="y" placeholder="Yä½ç½®">
                        </div>
                    `;
                }).join('');
            }).join('');
            
            // å°„æ‰‹æ¦œç¼–è¾‘å™¨
            const scorerEditor = document.getElementById('scorer-editor');
            scorerEditor.innerHTML = leagueData.topScorers.map(scorer => {
                return `
                    <div class="editor-item">
                        <div class="editor-label">å°„æ‰‹ ${scorer.rank}</div>
                        <input type="number" class="editor-input" value="${scorer.rank}" data-scorer="${scorer.rank}" data-field="rank" placeholder="æ’å">
                        <input type="text" class="editor-input" value="${scorer.name}" data-scorer="${scorer.rank}" data-field="name" placeholder="å§“å">
                        <select class="editor-input" data-scorer="${scorer.rank}" data-field="team">
                            ${leagueData.teams.map(team => 
                                `<option value="${team.name}" ${team.name === scorer.team ? 'selected' : ''}>${team.name}</option>`
                            ).join('')}
                        </select>
                        <input type="number" class="editor-input" value="${scorer.goals}" data-scorer="${scorer.rank}" data-field="goals" placeholder="è¿›çƒæ•°">
                        <input type="number" class="editor-input" value="${scorer.assists}" data-scorer="${scorer.rank}" data-field="assists" placeholder="åŠ©æ”»æ•°">
                    </div>
                `;
            }).join('');
            
            // æ¯”èµ›æ•°æ®ç¼–è¾‘å™¨
            const matchEditor = document.getElementById('match-editor');
            matchEditor.innerHTML = leagueData.recentMatches.map(match => {
                return `
                    <div class="editor-item">
                        <div class="editor-label">æ¯”èµ› ${match.id}</div>
                        <select class="editor-input" data-match="${match.id}" data-field="homeTeam">
                            ${leagueData.teams.map(team => 
                                `<option value="${team.name}" ${team.name === match.homeTeam ? 'selected' : ''}>${team.name}</option>`
                            ).join('')}
                        </select>
                        <span class="vs-text">vs</span>
                        <select class="editor-input" data-match="${match.id}" data-field="awayTeam">
                            ${leagueData.teams.map(team => 
                                `<option value="${team.name}" ${team.name === match.awayTeam ? 'selected' : ''}>${team.name}</option>`
                            ).join('')}
                        </select>
                        <input type="number" class="editor-input" value="${match.homeScore}" data-match="${match.id}" data-field="homeScore" placeholder="ä¸»é˜Ÿè¿›çƒ">
                        <input type="number" class="editor-input" value="${match.awayScore}" data-match="${match.id}" data-field="awayScore" placeholder="å®¢é˜Ÿè¿›çƒ">
                        <input type="date" class="editor-input" value="${match.date}" data-match="${match.id}" data-field="date">
                        <input type="time" class="editor-input" value="${match.time}" data-match="${match.id}" data-field="time">
                        <input type="text" class="editor-input" value="${match.venue}" data-match="${match.id}" data-field="venue" placeholder="åœºåœ°">
                    </div>
                `;
            }).join('');
        }

        // ä¿å­˜æ•°æ®
        function saveEditedData() {
            // æ›´æ–°æ–°é—»æ•°æ®
            const newsInputs = document.querySelectorAll('#news-editor .editor-input, #news-editor .editor-textarea');
            newsInputs.forEach(input => {
                const newsId = parseInt(input.getAttribute('data-news'));
                const field = input.getAttribute('data-field');
                const value = input.value;
                
                const news = leagueData.news.find(n => n.id === newsId);
                if (news) {
                    news[field] = value;
                }
            });
            
            // æ›´æ–°æ–°é—»ç±»å‹ï¼ˆå¤„ç†ä¸‹æ‹‰é€‰æ‹©æ¡†ï¼‰
            const newsSelects = document.querySelectorAll('#news-editor select');
            newsSelects.forEach(select => {
                const newsId = parseInt(select.getAttribute('data-news'));
                const field = select.getAttribute('data-field');
                const value = select.value;
                
                const news = leagueData.news.find(n => n.id === newsId);
                if (news) {
                    news[field] = value;
                }
            });
            
            // æ›´æ–°çƒé˜Ÿæ•°æ®
            const teamInputs = document.querySelectorAll('#team-editor .editor-input');
            teamInputs.forEach(input => {
                const teamId = parseInt(input.getAttribute('data-team'));
                const field = input.getAttribute('data-field');
                const value = parseInt(input.value) || 0;
                
                const team = leagueData.teams.find(t => t.id === teamId);
                if (team) {
                    team[field] = value;
                }
            });
            
            // æ›´æ–°çƒå‘˜æ•°æ®
            const playerInputs = document.querySelectorAll('#player-editor .editor-input');
            playerInputs.forEach(input => {
                const teamId = parseInt(input.getAttribute('data-team'));
                const playerNumber = parseInt(input.getAttribute('data-player'));
                const field = input.getAttribute('data-field');
                const value = input.value;
                
                const team = leagueData.teams.find(t => t.id === teamId);
                if (team) {
                    const player = team.squad.find(p => p.number === playerNumber);
                    if (player) {
                        if (field === 'number' || field === 'x' || field === 'y') {
                            player[field] = parseInt(value) || 0;
                        } else {
                            player[field] = value;
                        }
                    }
                }
            });
            
            // æ›´æ–°çƒå‘˜ä½ç½®ï¼ˆå¤„ç†ä¸‹æ‹‰é€‰æ‹©æ¡†ï¼‰
            const playerSelects = document.querySelectorAll('#player-editor select');
            playerSelects.forEach(select => {
                const teamId = parseInt(select.getAttribute('data-team'));
                const playerNumber = parseInt(select.getAttribute('data-player'));
                const field = select.getAttribute('data-field');
                const value = select.value;
                
                const team = leagueData.teams.find(t => t.id === teamId);
                if (team) {
                    const player = team.squad.find(p => p.number === playerNumber);
                    if (player) {
                        player[field] = value;
                    }
                }
            });
            
            // æ›´æ–°å°„æ‰‹æ¦œæ•°æ®
            const scorerInputs = document.querySelectorAll('#scorer-editor .editor-input');
            scorerInputs.forEach(input => {
                const scorerRank = parseInt(input.getAttribute('data-scorer'));
                const field = input.getAttribute('data-field');
                const value = input.value;
                
                const scorer = leagueData.topScorers.find(s => s.rank === scorerRank);
                if (scorer) {
                    if (field === 'rank' || field === 'goals' || field === 'assists') {
                        scorer[field] = parseInt(value) || 0;
                    } else {
                        scorer[field] = value;
                    }
                }
            });
            
            // æ›´æ–°å°„æ‰‹æ¦œçƒé˜Ÿï¼ˆå¤„ç†ä¸‹æ‹‰é€‰æ‹©æ¡†ï¼‰
            const scorerSelects = document.querySelectorAll('#scorer-editor select');
            scorerSelects.forEach(select => {
                const scorerRank = parseInt(select.getAttribute('data-scorer'));
                const field = select.getAttribute('data-field');
                const value = select.value;
                
                const scorer = leagueData.topScorers.find(s => s.rank === scorerRank);
                if (scorer) {
                    scorer[field] = value;
                }
            });
            
            // æ›´æ–°æ¯”èµ›æ•°æ®
            const matchInputs = document.querySelectorAll('#match-editor .editor-input');
            matchInputs.forEach(input => {
                const matchId = parseInt(input.getAttribute('data-match'));
                const field = input.getAttribute('data-field');
                const value = input.value;
                
                const match = leagueData.recentMatches.find(m => m.id === matchId);
                if (match) {
                    match[field] = value;
                }
            });
            
            // æ›´æ–°æ¯”èµ›å¯¹é˜µçƒé˜Ÿï¼ˆå¤„ç†ä¸‹æ‹‰é€‰æ‹©æ¡†ï¼‰
            const matchSelects = document.querySelectorAll('#match-editor select');
            matchSelects.forEach(select => {
                const matchId = parseInt(select.getAttribute('data-match'));
                const field = select.getAttribute('data-field');
                const value = select.value;
                
                const match = leagueData.recentMatches.find(m => m.id === matchId);
                if (match) {
                    match[field] = value;
                }
            });
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            saveData();
            
            alert('æ•°æ®ä¿å­˜æˆåŠŸï¼');
            
            // è¿”å›ä¸»é¡µé¢å¹¶åˆ·æ–°æ•°æ®
            appState.isAdminMode = false;
            showPage('main-page');
            renderLeagueData();
        }

        // é‡ç½®æ•°æ®
        async function resetData() {
            if (confirm('ç¡®å®šè¦é‡ç½®æ‰€æœ‰æ•°æ®å—ï¼Ÿè¿™å°†æ¢å¤ä¸ºåˆå§‹çŠ¶æ€ã€‚')) {
                leagueData = { ...defaultLeagueData };
                saveData();
                
                // é‡ç½®èŠå¤©å®¤
                chatRoom.messages = [];
                localStorage.removeItem('chatMessages');
                
                // å¦‚æœåœ¨çº¿ï¼ŒåŒæ­¥åˆ°æœåŠ¡å™¨
                if (appState.isOnline && appState.serverUrl) {
                    try {
                        await fetch(`${appState.serverUrl}/api/reset`, {
                            method: 'POST'
                        });
                        console.log('æœåŠ¡å™¨æ•°æ®å·²é‡ç½®');
                    } catch (error) {
                        console.log('æœåŠ¡å™¨é‡ç½®å¤±è´¥:', error.message);
                    }
                }
                
                renderAdminEditor();
                renderChatMessages();
                alert('æ•°æ®å·²é‡ç½®ï¼');
            }
        }

        // é€€å‡ºç™»å½•
        function logout() {
            appState.isAuthenticated = false;
            appState.isAdminMode = false;
            showPage('main-page');
        }

        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
        function initEventListeners() {
            // ç½‘ç»œæ£€æŸ¥æŒ‰é’®
            document.getElementById('network-btn').addEventListener('click', manualCheckNetwork);
            
            // ç®¡ç†å‘˜ç™»å½•è¡¨å•
            document.getElementById('admin-login-form').addEventListener('submit', handleAdminLogin);
            
            // ç®¡ç†å‘˜æŒ‰é’®
            document.getElementById('admin-btn').addEventListener('click', function() {
                showPage('admin-login-page');
            });
            
            // é€€å‡ºæŒ‰é’®
            document.getElementById('logout-btn').addEventListener('click', logout);
            
            // ä¿å­˜æ•°æ®æŒ‰é’®
            document.getElementById('save-data-btn').addEventListener('click', saveEditedData);
            
            // é‡ç½®æ•°æ®æŒ‰é’®
            document.getElementById('reset-data-btn').addEventListener('click', resetData);
            
            // è¿”å›æŒ‰é’®
            document.getElementById('back-to-main').addEventListener('click', function() {
                showPage('main-page');
            });
            
            document.getElementById('back-to-main-admin').addEventListener('click', function() {
                showPage('main-page');
            });
            
            document.getElementById('back-to-main-from-admin').addEventListener('click', function() {
                appState.isAdminMode = false;
                showPage('main-page');
            });
            
            document.getElementById('back-to-main-from-news').addEventListener('click', function() {
                showPage('main-page');
            });
            
            // å›è½¦é”®ç™»å½•
            document.getElementById('admin-password').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleAdminLogin(e);
                }
            });
            
            // èŠå¤©åŠŸèƒ½
            document.getElementById('send-chat').addEventListener('click', sendChatMessage);
            
            document.getElementById('chat-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendChatMessage();
                }
            });
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
            initEventListeners();
            
            // è‡ªåŠ¨æ£€æµ‹æœåŠ¡å™¨
            autoDetectServer().then(isConnected => {
                if (isConnected) {
                    console.log('æœåŠ¡å™¨è¿æ¥æˆåŠŸ');
                } else {
                    console.log('æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œä½¿ç”¨ç¦»çº¿æ¨¡å¼');
                }
                
                // åŠ è½½æ•°æ®
                loadData().then(() => {
                    // æ¸²æŸ“æ•°æ®
                    renderLeagueData();
                    
                    // åŠ è½½èŠå¤©æ¶ˆæ¯
                    loadChatMessages();
                    
                    console.log('å…­äºŒè¶…çº§è”èµ›ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆï¼');
                });
            });
        });
    </script>
</body>
</html>